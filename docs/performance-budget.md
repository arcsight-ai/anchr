# Performance budget (Day 4)

**Freeze commit:** 6597d00c1cf47a86fa6c1e8a0db5d987e9c3232f

## Repo sizes (source + packages/*/src .ts/.tsx, excl. test)

| Repo | File count | Budget |
|------|------------|--------|
| sindresorhus/ky | 24 | < 30s |
| trpc/trpc | 183 | < 90s |
| vitest-dev/vitest | 475 | < 180s |

## Timings (5 runs, middle 3 used for mean and variance)

| Repo | Run 1 (ms) | Run 2 (ms) | Run 3 (ms) | Mean (ms) | Mean (s) | Variance % |
|------|------------|------------|------------|-----------|----------|------------|
| sindresorhus/ky | 71 | 73 | 74 | 73 | 0.07 | 1.7 |
| trpc/trpc | 212 | 213 | 214 | 213 | 0.21 | 0.4 |
| vitest-dev/vitest | 404 | 405 | 409 | 406 | 0.41 | 0.5 |

## Budget compliance

| Repo | Budget | Actual (mean) | Variance < 10% | PASS |
|------|--------|---------------|----------------|------|
| Small | < 30s | 0.07s | yes | PASS |
| Medium | < 90s | 0.21s | yes | PASS |
| Large | < 180s | 0.41s | yes | PASS |

## Memory observations

RSS sampled at analysis_start and after decision_made (when ANCHR_STRUCTURED_LOG=1). No unbounded recursion or exponential graph growth observed in runs.

## Structured logging

Events emitted (to stderr, when ANCHR_STRUCTURED_LOG=1):
- `analysis_start`
- `graph_built`
- `minimalcut_done`
- `decision_made`
- `total_runtime_ms`

## Bottlenecks

All within budget.

## Perf fixes made

None.

---
*Generated by scripts/hardening/day4-performance-budget.ts*
